syntax = "proto3";

import "google/protobuf/any.proto";

package JAAS;

message UInt64
   {
   uint64 val = 1;
   uint64 type = 2;
   }
message UInt32
   {
   uint32 val = 1;
   uint64 type = 2;
   }
message Bytes
   {
   bytes val = 1;
   uint64 type = 2;
   }
message Bool
   {
   bool val = 1;
   uint64 type = 2;
   }
message Int32
   {
   int32 val = 1;
   uint64 type = 2;
   }
message Void
   {
   }

message AnyData
   {
   repeated google.protobuf.Any data = 1;
   }

enum J9ServerMessageType
   {
   compilationCode = 0;
   mirrorResolvedJ9Method = 1;
   get_params_to_construct_TR_j9method = 2;

   // For TR_ResolvedJ9JAASServerMethod methods
   ResolvedMethod_isJNINative = 100;
   ResolvedMethod_isInterpreted = 101;
   ResolvedMethod_setRecognizedMethodInfo = 102;
   ResolvedMethod_getClassLoader = 103;
   ResolvedMethod_allocateException = 104;

   // For TR_J9ServerVM methods
   VM_isClassLibraryClass = 200;
   VM_isClassLibraryMethod = 201;
   VM_getSuperClass = 202;
   VM_isInstanceOf = 203;
   VM_isInterfaceClass = 204;
   VM_isClassArray = 205;
   VM_isClassFinal = 206;
   VM_isAbstractClass = 207;
   VM_getSystemClassFromClassName = 208;
   VM_isMethodEnterTracingEnabled = 209;
   VM_isMethodExitTracingEnabled = 210;
   VM_getClassClassPointer = 211;
   VM_getClassLoader = 212;
   VM_getClassOfMethod = 213;
   VM_getBaseComponentClass = 214;
   VM_getLeafComponentClassFromArrayClass = 215;
   VM_getClassFromSignature_0 = 216;
   VM_getClassFromSignature_1 = 217;
   VM_jitFieldsAreSame = 218;
   VM_jitStaticsAreSame = 219;
   VM_getComponentClassFromArrayClass = 220;
   VM_classHasBeenReplaced = 221;
   VM_classHasBeenExtended = 222;
   VM_compiledAsDLTBefore = 223;
   VM_getClassNameChars = 224;
   VM_getOverflowSafeAllocSize = 225;
   VM_isThunkArchetype = 226;
   VM_printTruncatedSignature = 227;
   }

message J9ServerMessage
   {
   J9ServerMessageType type = 1;
   AnyData data = 2;
   }

message J9ClientMessage
   {
   AnyData data = 2;
   }

service J9CompileService
   {
   rpc Compile (stream J9ClientMessage) returns (stream J9ServerMessage);
   }
